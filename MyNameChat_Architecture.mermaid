graph TD
    subgraph "Entry Points (apps/)"
        A1[MyNameTemplate.py]
        A2[CustomTemplate.py]
        A3[MyNameTemplate_suggestion.py]
    end

    subgraph "Core Graph Logic (graphs/ & nodes/)"
        B1[builder.py <br/> (create_base_ReAct_graph)]
        B2[nodes/core.py <br/> (LLM Call & Auto-Load)]
        B3[nodes/common.py <br/> (Prep & Recorder)]
        B4[nodes/routers.py <br/> (Conditional Edges)]
        B5[nodes/suggestion.py <br/> (Suggestion Gen)]
    end

    subgraph "State Management (state/)"
        C1[schemas.py <br/> (AgentState)]
    end

    subgraph "Tools Library (tools/)"
        D1[registry.py <br/> (Tool Aggregator)]
        D2[image.py <br/> (PPIO/Seedream)]
        D3[video.py <br/> (Sora-2)]
        D4[utils.py <br/> (Helpers & Config)]
    end

    subgraph "Prompts & Utils (prompts/ & utils/)"
        E1[templates.py <br/> (System Prompts)]
        E2[logger.py <br/> (Context-Aware Logger)]
    end

    %% Relationships
    A1 & A2 & A3 -->|Calls| B1
    A1 & A2 & A3 -->|Configures| E2
    
    B1 -->|Assembles| B2
    B1 -->|Assembles| B3
    B1 -->|Assembles| B4
    B1 -.->|Optional| B5
    B1 -->|Uses| C1
    
    B2 -->|Uses| D1
    B2 -->|Uses| E1
    
    D1 -->|Imports| D2
    D1 -->|Imports| D3
    D2 & D3 -->|Uses| D4
    D4 -->|Logs via| E2
